# =================================================================
# SCHOOL MANAGEMENT SYSTEM - Environment Configuration
# =================================================================

# -----------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------
APP_NAME="School Management System"
APP_ENV="development"  # development | production | staging
DEBUG="true"  # true | false
APP_VERSION="1.0.0"
SECRET_KEY="your-secret-key-change-in-production-min-32-chars"
API_PREFIX="/api"

# -----------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------
BACKEND_HOST="0.0.0.0"
BACKEND_PORT="8001"
FRONTEND_PORT="3000"
CORS_ORIGINS="*"

# -----------------------------------------------------------------
# DATABASE CONFIGURATION (Choose: postgresql | mongodb)
# -----------------------------------------------------------------
DATABASE_TYPE="postgresql"  # postgresql | mongodb

# PostgreSQL Configuration
POSTGRES_HOST="localhost"
POSTGRES_PORT="5432"
POSTGRES_USER="schooladmin"
POSTGRES_PASSWORD="your-secure-password"
POSTGRES_DB="school_management_db"
POSTGRES_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}"

# MongoDB Configuration (Alternative)
MONGO_URL="mongodb://localhost:27017"
DB_NAME="school_management_db"

# Database Pool Settings
DB_POOL_SIZE="10"
DB_MAX_OVERFLOW="20"
DB_POOL_TIMEOUT="30"

# -----------------------------------------------------------------
# REDIS CONFIGURATION (Caching & Sessions)
# -----------------------------------------------------------------
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""
REDIS_DB="0"
REDIS_URL="redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}"
REDIS_CACHE_TTL="3600"  # seconds

# -----------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------
# JWT Settings
JWT_SECRET_KEY="your-jwt-secret-key-change-in-production-min-32-chars"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES="30"
JWT_REFRESH_TOKEN_EXPIRE_DAYS="7"

# Password Settings
PASSWORD_MIN_LENGTH="8"
PASSWORD_REQUIRE_UPPERCASE="true"
PASSWORD_REQUIRE_NUMBERS="true"
PASSWORD_REQUIRE_SPECIAL="true"
BCRYPT_ROUNDS="12"

# 2FA Settings
ENABLE_2FA="true"
TOTP_ISSUER="School Management System"

# OAuth2 Settings (Optional)
OAUTH2_ENABLED="false"
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"
GOOGLE_REDIRECT_URI="http://localhost:3000/auth/google/callback"

# Session Settings
SESSION_COOKIE_NAME="school_session"
SESSION_COOKIE_SECURE="true"
SESSION_COOKIE_HTTPONLY="true"
SESSION_COOKIE_SAMESITE="lax"

# -----------------------------------------------------------------
# OBJECT STORAGE (S3-Compatible: MinIO, AWS S3, GCS, Azure Blob)
# -----------------------------------------------------------------
STORAGE_PROVIDER="minio"  # minio | s3 | gcs | azure

# MinIO Configuration
MINIO_ENDPOINT="localhost:9000"
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"
MINIO_BUCKET_NAME="school-files"
MINIO_USE_SSL="false"

# AWS S3 Configuration
AWS_ACCESS_KEY_ID="your-aws-access-key"
AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
AWS_REGION="us-east-1"
AWS_S3_BUCKET="school-files"

# Google Cloud Storage
GCS_PROJECT_ID="your-gcs-project-id"
GCS_BUCKET_NAME="school-files"
GCS_CREDENTIALS_FILE="path/to/credentials.json"

# Azure Blob Storage
AZURE_STORAGE_CONNECTION_STRING="your-azure-connection-string"
AZURE_CONTAINER_NAME="school-files"

# Storage Settings
MAX_FILE_SIZE_MB="10"
ALLOWED_FILE_EXTENSIONS=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.zip"

# -----------------------------------------------------------------
# EMAIL CONFIGURATION (SMTP)
# -----------------------------------------------------------------
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-password"
SMTP_FROM_EMAIL="noreply@school.com"
SMTP_FROM_NAME="School Management System"
SMTP_USE_TLS="true"
SMTP_USE_SSL="false"

# -----------------------------------------------------------------
# SMS CONFIGURATION (Optional)
# -----------------------------------------------------------------
SMS_PROVIDER="twilio"  # twilio | nexmo | custom
SMS_ENABLED="false"

# Twilio Configuration
TWILIO_ACCOUNT_SID="your-twilio-account-sid"
TWILIO_AUTH_TOKEN="your-twilio-auth-token"
TWILIO_PHONE_NUMBER="+1234567890"

# -----------------------------------------------------------------
# PAYMENT GATEWAY CONFIGURATION
# -----------------------------------------------------------------
PAYMENT_GATEWAY="midtrans"  # midtrans | xendit | stripe | bayarind | manual

# Midtrans Configuration
MIDTRANS_SERVER_KEY="your-midtrans-server-key"
MIDTRANS_CLIENT_KEY="your-midtrans-client-key"
MIDTRANS_IS_PRODUCTION="false"
MIDTRANS_MERCHANT_ID="your-merchant-id"

# Xendit Configuration
XENDIT_SECRET_KEY="your-xendit-secret-key"
XENDIT_PUBLIC_KEY="your-xendit-public-key"
XENDIT_WEBHOOK_TOKEN="your-xendit-webhook-token"
XENDIT_IS_PRODUCTION="false"

# Stripe Configuration
STRIPE_SECRET_KEY="your-stripe-secret-key"
STRIPE_PUBLIC_KEY="your-stripe-public-key"
STRIPE_WEBHOOK_SECRET="your-stripe-webhook-secret"

# Bayarind Configuration
BAYARIND_API_KEY="your-bayarind-api-key"
BAYARIND_MERCHANT_ID="your-bayarind-merchant-id"
BAYARIND_IS_PRODUCTION="false"

# Payment Settings
PAYMENT_CURRENCY="IDR"  # IDR | USD | EUR
PAYMENT_TIMEOUT_MINUTES="1440"  # 24 hours

# -----------------------------------------------------------------
# LMS INTEGRATION (Moodle & Others)
# -----------------------------------------------------------------
LMS_ENABLED="false"
LMS_PROVIDER="moodle"  # moodle | canvas | blackboard

# Moodle Configuration
MOODLE_URL="https://your-moodle-instance.com"
MOODLE_TOKEN="your-moodle-webservice-token"
MOODLE_SERVICE="moodle_mobile_app"  # or your custom service

# LMS Sync Settings
LMS_SYNC_MODE="push"  # push | pull | bidirectional
LMS_SYNC_INTERVAL_MINUTES="60"
LMS_AUTO_SYNC_ENABLED="false"
LMS_CONFLICT_RESOLUTION="source_wins"  # source_wins | target_wins | manual

# LTI Configuration (Optional)
LTI_KEY="your-lti-key"
LTI_SECRET="your-lti-secret"

# -----------------------------------------------------------------
# AI/LLM INTEGRATION (Optional)
# -----------------------------------------------------------------
LLM_ENABLED="false"
LLM_PROVIDER="openai"  # openai | anthropic | google

# Emergent LLM Key (Universal Key for OpenAI, Anthropic, Google)
EMERGENT_LLM_KEY="your-emergent-llm-key"

# OpenAI Configuration
OPENAI_API_KEY="your-openai-api-key"
OPENAI_MODEL="gpt-4"
OPENAI_MAX_TOKENS="1000"

# Anthropic Configuration
ANTHROPIC_API_KEY="your-anthropic-api-key"
ANTHROPIC_MODEL="claude-3-sonnet-20240229"

# Google AI Configuration
GOOGLE_AI_API_KEY="your-google-ai-api-key"
GOOGLE_AI_MODEL="gemini-pro"

# -----------------------------------------------------------------
# MONITORING & OBSERVABILITY
# -----------------------------------------------------------------
# Logging
LOG_LEVEL="INFO"  # DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_FORMAT="json"  # json | text
LOG_FILE_PATH="logs/app.log"
LOG_MAX_SIZE_MB="100"
LOG_BACKUP_COUNT="5"

# Sentry Error Tracking
SENTRY_DSN="your-sentry-dsn"
SENTRY_ENABLED="false"
SENTRY_ENVIRONMENT="development"
SENTRY_TRACES_SAMPLE_RATE="0.1"

# Prometheus Metrics
METRICS_ENABLED="true"
METRICS_PORT="9090"

# OpenTelemetry (Optional)
OTEL_ENABLED="false"
OTEL_ENDPOINT="http://localhost:4318"
OTEL_SERVICE_NAME="school-management-api"

# -----------------------------------------------------------------
# RATE LIMITING & SECURITY
# -----------------------------------------------------------------
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_PER_MINUTE="60"
RATE_LIMIT_PER_HOUR="1000"

# CORS Settings
CORS_ALLOWED_ORIGINS="http://localhost:3000,https://school.com"
CORS_ALLOW_CREDENTIALS="true"

# Security Headers
SECURITY_HEADERS_ENABLED="true"

# -----------------------------------------------------------------
# BACKGROUND JOBS & QUEUE
# -----------------------------------------------------------------
QUEUE_PROVIDER="redis"  # redis | rabbitmq | celery
QUEUE_DEFAULT_TIMEOUT="300"  # seconds

# RabbitMQ Configuration (Optional)
RABBITMQ_HOST="localhost"
RABBITMQ_PORT="5672"
RABBITMQ_USER="guest"
RABBITMQ_PASSWORD="guest"
RABBITMQ_VHOST="/"

# -----------------------------------------------------------------
# FEATURES FLAGS
# -----------------------------------------------------------------
FEATURE_ADMISSIONS="true"
FEATURE_DORMITORY="true"
FEATURE_LIBRARY="true"
FEATURE_FINANCE="true"
FEATURE_ATTENDANCE_QR="true"
FEATURE_BIOMETRIC="false"
FEATURE_MOBILE_APP="false"
FEATURE_PARENT_PORTAL="true"
FEATURE_ALUMNI="false"

# -----------------------------------------------------------------
# NOTIFICATION SETTINGS
# -----------------------------------------------------------------
NOTIFICATION_CHANNELS="email,sms,push,in_app"
NOTIFICATION_DEFAULT_CHANNEL="email"

# Push Notification (Firebase Cloud Messaging)
FCM_ENABLED="false"
FCM_SERVER_KEY="your-fcm-server-key"
FCM_SENDER_ID="your-fcm-sender-id"

# -----------------------------------------------------------------
# REPORT & EXPORT SETTINGS
# -----------------------------------------------------------------
REPORT_TEMP_DIR="/tmp/reports"
REPORT_RETENTION_DAYS="7"
EXPORT_MAX_ROWS="10000"

# PDF Generation
PDF_ENGINE="weasyprint"  # weasyprint | reportlab | wkhtmltopdf

# -----------------------------------------------------------------
# CRON & SCHEDULED TASKS
# -----------------------------------------------------------------
CRON_ENABLED="true"
CRON_AUTO_BACKUP_ENABLED="true"
CRON_AUTO_BACKUP_TIME="02:00"  # HH:MM format
CRON_REPORT_GENERATION_ENABLED="true"
CRON_LMS_SYNC_ENABLED="false"

# -----------------------------------------------------------------
# LOCALE & TIMEZONE
# -----------------------------------------------------------------
DEFAULT_TIMEZONE="Asia/Jakarta"
DEFAULT_LANGUAGE="en"  # en | id | ar
SUPPORTED_LANGUAGES="en,id,ar"

# -----------------------------------------------------------------
# AUDIT & COMPLIANCE
# -----------------------------------------------------------------
AUDIT_LOG_ENABLED="true"
AUDIT_LOG_RETENTION_DAYS="365"
DATA_RETENTION_POLICY_DAYS="2555"  # 7 years

# -----------------------------------------------------------------
# DEVELOPMENT & TESTING
# -----------------------------------------------------------------
SEED_DATABASE="false"
FAKER_LOCALE="en_US"
TEST_MODE="false"

# -----------------------------------------------------------------
# DOCKER COMPOSE SETTINGS (for local development)
# -----------------------------------------------------------------
COMPOSE_PROJECT_NAME="school_management"
COMPOSE_FILE="docker-compose.yml"